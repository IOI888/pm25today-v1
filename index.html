<!doctype html>
<html lang="th">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>PM2.5TODAY ‚Äî ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏î‡∏µ‡∏¢‡∏ß</title>
<meta name="description" content="‡πÄ‡∏ä‡πá‡∏Å‡∏Ñ‡πà‡∏≤ PM2.5 ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ü‡∏≠‡∏Å ‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏≤‡∏Å ‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ß‡∏±‡∏î ‚Äî ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö GitHub Pages">
<style>
:root{--bg:#ffffff;--fg:#0f172a;--muted:#64748b;--border:#e2e8f0}
*{box-sizing:border-box}html,body{margin:0;padding:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Noto Sans Thai,Arial,sans-serif;background:linear-gradient(#fff,#f8fafc);color:var(--fg)}
.container{max-width:1080px;margin:0 auto;padding:0 16px}
header{position:sticky;top:0;background:rgba(255,255,255,.85);backdrop-filter:saturate(180%) blur(10px);border-bottom:1px solid var(--border);z-index:50}
.nav{display:flex;align-items:center;justify-content:space-between;padding:12px 0}
.brand{display:flex;gap:8px;align-items:center;font-weight:600}
.link{color:#0ea5e9;text-decoration:none}
.main{min-height:60vh}
.card{background:#fff;border:1px solid var(--border);border-radius:16px;padding:16px}
.btn{display:inline-block;background:#0f172a;color:#fff;border:none;border-radius:14px;padding:10px 14px;cursor:pointer;text-decoration:none}
.badge{display:inline-flex;gap:6px;align-items:center;background:#eef2ff;color:#334155;border-radius:999px;padding:6px 10px;font-size:12px}
select,input[type=range]{width:100%}
.grid{display:grid;gap:16px}
.grid-3{grid-template-columns:repeat(3,1fr)}
@media(max-width:700px){.grid-3{grid-template-columns:1fr}}
.pill{display:inline-flex;padding:6px 10px;border-radius:999px;color:#fff;font-weight:600}
.green{background:#22c55e}.lime{background:#84cc16}.yellow{background:#eab308}.orange{background:#f97316}.red{background:#ef4444}.purple{background:#7c3aed}
.muted{color:var(--muted)}.small{font-size:12px}
footer{border-top:1px solid var(--border);padding:40px 0;margin-top:32px}
.mt-2{margin-top:8px}.mt-3{margin-top:12px}.mt-6{margin-top:24px}.mt-8{margin-top:32px}
h1{font-size:34px;line-height:1.2;margin:0}h2{font-size:24px;margin:0 0 12px 0}
.product{border:1px solid var(--border);border-radius:16px;padding:12px}
.product .top{display:flex;justify-content:space-between;align-items:center}
.product ul{margin:8px 0 0 16px}
.img-responsive{width:100%;height:auto;border-radius:18px;box-shadow:0 10px 30px rgba(2,6,23,.08);border:1px solid var(--border)}
.thumb{width:100%;height:180px;object-fit:cover;border-radius:14px;border:1px solid var(--border)}
</style>
</head>
<body>
<header><div class="container nav"><div class="brand"><span>üåÄ</span><span id="brand">PM2.5TODAY</span></div></div></header>
<main class="container main">
  <section class="grid" style="grid-template-columns:1.1fr .9fr;gap:24px;margin-top:20px">
    <div>
      <h1>‡πÄ‡∏ä‡πá‡∏Å PM2.5 ‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå ‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô‡∏Ñ‡∏∏‡∏ì</h1>
      <p class="mt-3 muted">‡∏£‡∏∏‡πà‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö GitHub Pages ‚Äî ‡∏°‡∏µ‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå <code>images/</code> ‡πÅ‡∏¢‡∏Å</p>
      <div class="card mt-6" id="realtime">
        <h3>‡πÄ‡∏ä‡πá‡∏Å‡∏Ñ‡πà‡∏≤ PM2.5</h3>
        <div class="mt-2"><select id="city"></select></div>
        <div class="mt-3" id="status"></div>
        <div class="mt-2"><strong>PM2.5:</strong> <span id="pmval">‚Äî</span></div>
        <div class="mt-2 muted">‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Ñ‡πà‡∏≤ AQI: <strong id="aqi">‚Äî</strong></div>
        <div class="small muted mt-2">‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î: <span id="ts">‚Äî</span></div>
      </div>
    </div>
    <div><img src="images/hero.png" class="img-responsive" alt="Hero"></div>
  </section>
  <section class="mt-8" id="guide"><h2>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤/‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</h2>
    <div id="product-grid" class="grid grid-3 mt-3"></div>
  </section>
  <section class="mt-8"><h2>‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ü‡∏≠‡∏Å</h2>
    <div class="grid"><div class="card">
      <div class="small muted">‡∏Ç‡∏ô‡∏≤‡∏î‡∏´‡πâ‡∏≠‡∏á: <strong><span id="roomOut">30</span> ‡∏ï‡∏£.‡∏°.</strong></div>
      <input id="roomRange" type="range" min="10" max="80" value="30" step="1">
      <div class="card mt-3">‡∏Ñ‡πà‡∏≤ CADR ‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ ‚âà <strong id="cadrOut">180</strong> m¬≥/h</div>
    </div></div>
  </section>
</main>
<footer><div class="container small muted">¬© 2025 PM2.5TODAY</div></footer>
<script>
const cfg = {
  brand: "PM2.5TODAY",
  cities: [
    {id:"Bangkok", label:"‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏Ø", lat:13.7563, lon:100.5018},
    {id:"Chiang Mai", label:"‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà", lat:18.7883, lon:98.9853},
    {id:"Chiang Rai", label:"‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢", lat:19.9072, lon:99.8304},
    {id:"Khon Kaen", label:"‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô", lat:16.4419, lon:102.8350},
    {id:"Nakhon Ratchasima", label:"‡πÇ‡∏Ñ‡∏£‡∏≤‡∏ä", lat:14.9799, lon:102.0977},
    {id:"Phitsanulok", label:"‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å", lat:16.8211, lon:100.2659},
    {id:"Hua Hin", label:"‡∏´‡∏±‡∏ß‡∏´‡∏¥‡∏ô", lat:12.5684, lon:99.9577}
  ],
  offlineSamples: {Bangkok:38.5,"Chiang Mai":55.2,"Chiang Rai":47.1,"Khon Kaen":29.4,"Nakhon Ratchasima":35.0,"Phitsanulok":26.2,"Hua Hin":18.0},
  products: [
    {id:"p1",name:"‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ü‡∏≠‡∏Å‡∏≠‡∏≤‡∏Å‡∏≤‡∏® HEPA ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô",brand:"CleanAir Pro 300",price:"‡∏ø4,xxx ‚Äì ‡∏ø6,xxx",badge:"‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥",highlights:["HEPA H13","CADR 300m¬≥/h","‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î 20‚Äì35 ‡∏ï‡∏£.‡∏°."],affiliateUrl:"#",image:"images/purifier.png"},
    {id:"p2",name:"‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏≤‡∏Å N95 ‡∏™‡∏≤‡∏¢‡∏Ñ‡∏•‡πâ‡∏≠‡∏á‡∏´‡∏π",brand:"SafeBreath N95",price:"‡∏ø15/‡∏ä‡∏¥‡πâ‡∏ô",badge:"‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡πà‡∏≤",highlights:["‡∏Å‡∏£‡∏≠‡∏á PM2.5 >95%","‡πÉ‡∏™‡πà‡∏™‡∏ö‡∏≤‡∏¢","‡πÅ‡∏û‡πá‡∏Å 20 ‡∏ä‡∏¥‡πâ‡∏ô"],affiliateUrl:"#",image:"images/mask.png"},
    {id:"p3",name:"‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ß‡∏±‡∏î‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏û‡∏£‡πâ‡∏≠‡∏° PM2.5",brand:"AirSense Mini",price:"‡∏ø1,5xx ‚Äì ‡∏ø2,xxx",badge:"‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°",highlights:["PM2.5 / PM10 / TVOC","‡∏à‡∏≠‡∏™‡∏µ","‡∏ä‡∏≤‡∏£‡πå‡∏à USB-C"],affiliateUrl:"#",image:"images/sensor.png"}
  ]
};
function pm25ToAQI(pm25){ if(pm25==null) return {aqi:"‚Äî",label:"‚Äî",cls:""};
  const bp=[{hi:12,label:"‡∏î‡∏µ‡∏°‡∏≤‡∏Å",cls:"green"},{hi:35.4,label:"‡∏î‡∏µ",cls:"lime"},{hi:55.4,label:"‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á",cls:"yellow"},{hi:150.4,label:"‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏°‡∏µ‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö",cls:"orange"},{hi:250.4,label:"‡∏°‡∏µ‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á",cls:"red"},{hi:Infinity,label:"‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢‡∏°‡∏≤‡∏Å",cls:"purple"}];
  const b=bp.find(x=>pm25<=x.hi)||bp[bp.length-1]; const aqi=Math.round(Math.min(500,pm25*4)); return {aqi,label:b.label,cls:b.cls}; }
async function getPM25(lat,lon){ const url=`https://api.openaq.org/v2/latest?coordinates=${lat},${lon}&radius=15000&parameter=pm25&limit=1`;
  const controller = new AbortController(); const t = setTimeout(()=>controller.abort(), 6000);
  try{ const r=await fetch(url,{signal:controller.signal}); clearTimeout(t); const j=await r.json(); const m=j?.results?.[0]?.measurements?.[0]; if(!m) return null; return {value:m.value,unit:m.unit||"¬µg/m¬≥",ts:m.lastUpdated}; }catch(e){ clearTimeout(t); return null; } }
function renderProducts(ps){ const wrap=document.querySelector('#product-grid'); wrap.innerHTML=''; ps.forEach(p=>{ const el=document.createElement('div'); el.className='product'; const img = p.image ? `<img class='thumb' src='${p.image}' alt='${p.name}'>` : ""; el.innerHTML=`
  ${img}
  <div class="top" style="margin-top:8px"><div><strong>${p.name}</strong><div class="small muted">${p.brand}</div></div><span class="badge">${p.badge}</span></div>
  <ul>${p.highlights.map(h=>`<li>${h}</li>`).join('')}</ul>
  <div class="mt-2 small muted">‡∏£‡∏≤‡∏Ñ‡∏≤: ${p.price}</div>
  <div class="mt-3"><a class="btn" target="_blank" rel="nofollow sponsored" href="${p.affiliateUrl}">‡∏ã‡∏∑‡πâ‡∏≠‡∏ú‡πà‡∏≤‡∏ô‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</a></div>`; wrap.appendChild(el); }); }
function initCADR(){ const range=document.querySelector('#roomRange'),out=document.querySelector('#roomOut'),cadr=document.querySelector('#cadrOut'); const calc=()=>{const m2=parseInt(range.value,10); out.textContent=m2; const val=Math.max(150,Math.round(m2*6)); cadr.textContent=val;}; range.addEventListener('input',calc); calc(); }
(async function(){ const sel=document.querySelector('#city'); cfg.cities.forEach(c=>{const op=document.createElement('option'); op.value=c.id; op.textContent=c.label; sel.appendChild(op);});
  async function refresh(){ const id=sel.value||cfg.cities[0].id; const city=cfg.cities.find(c=>c.id===id)||cfg.cities[0];
    const status=document.querySelector('#status'); const pmval=document.querySelector('#pmval'); const aqiEl=document.querySelector('#aqi'); const ts=document.querySelector('#ts');
    status.innerHTML='<span class="small muted">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‚Ä¶</span>'; const data=await getPM25(city.lat,city.lon);
    if(!data){ const fallback = cfg.offlineSamples?.[id]; if(fallback!=null){ const {aqi,label,cls}=pm25ToAQI(fallback);
        status.innerHTML=`<span class="pill ${cls}">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå): ${label}</span>`; pmval.textContent=`${fallback.toFixed(1)} ¬µg/m¬≥`; aqiEl.textContent=aqi; ts.textContent=new Date().toLocaleString(); }
      else { status.innerHTML='<span class="small" style="color:#ef4444">‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà</span>'; } return; }
    const {aqi,label,cls}=pm25ToAQI(data.value);
    status.innerHTML=`<span class="pill ${cls}">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ${label}</span>`; pmval.textContent=`${data.value.toFixed(1)} ${data.unit}`; aqiEl.textContent=aqi; ts.textContent=new Date(data.ts).toLocaleString(); }
  sel.addEventListener('change',refresh); sel.value=cfg.cities[0].id; refresh();
  renderProducts(cfg.products); initCADR();
})();
</script>
</body>
</html>
